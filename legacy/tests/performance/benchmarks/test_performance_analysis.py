"""
–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å–∫–æ—Ä–µ–Ω–∏—é.

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–∞–ª–∏–∑ —Å–∞–º—ã—Ö –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
–ø–æ –∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–µ–∑ —É—Ö—É–¥—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
"""

import pytest
import pandas as pd
import numpy as np
import time
from unittest.mock import patch, MagicMock


@pytest.mark.performance
class TestPerformanceAnalysis:
    """–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π."""

    @pytest.mark.performance
    def test_data_generation_when_optimized_then_faster_execution(self, rng):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 1: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

        –ú–Ω–æ–≥–∏–µ —Ç–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
        –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
        """
        # –ú–ï–î–õ–ï–ù–ù–´–ô –ø–æ–¥—Ö–æ–¥: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ü–∏–∫–ª–∞—Ö
        slow_data = []
        for i in range(1000):
            slow_data.append(rng.normal(100, 10))

        # –ë–´–°–¢–†–´–ô –ø–æ–¥—Ö–æ–¥: –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
        fast_data = rng.normal(100, 10, 1000)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã
        assert len(slow_data) == len(fast_data)

        # –í–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º
        assert isinstance(fast_data, np.ndarray), "–ë—ã—Å—Ç—Ä—ã–π –ø–æ–¥—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å numpy array"
        assert len(fast_data) == 1000, "–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–º—É"
    
    @pytest.mark.performance
    def test_fixture_reuse_when_optimized_then_reduces_overhead(self, rng):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 2: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä.

        –ú–Ω–æ–≥–∏–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
        —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å –æ–±–ª–∞—Å—Ç—å—é –≤–∏–¥–∏–º–æ—Å—Ç–∏ module –∏–ª–∏ session.
        """
        # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        
        # –ú–ï–î–õ–ï–ù–ù–û: —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
        def create_test_data_slow():
            return pd.DataFrame({
                'price1': rng.normal(100, 10, 500),
                'price2': rng.normal(50, 5, 500)
            })
        
        # –ë–´–°–¢–†–û: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        @pytest.fixture(scope="module")
        def shared_test_data():
            return pd.DataFrame({
                'price1': rng.normal(100, 10, 500),
                'price2': rng.normal(50, 5, 500)
            })
        
        # –ò–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
        start_time = time.time()
        data1 = create_test_data_slow()
        data2 = create_test_data_slow()  # –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
        slow_time = time.time() - start_time
        
        # –ò–º–∏—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
        start_time = time.time()
        shared_data = create_test_data_slow()  # –°–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑
        data3 = shared_data  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
        data4 = shared_data  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
        fast_time = time.time() - start_time
        
        speedup = slow_time / fast_time if fast_time > 0 else float('inf')
        print(f"–£—Å–∫–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä: {speedup:.1f}x")
    
    def test_mock_optimization(self, rng):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–∫–æ–≤ –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
        
        –¢–µ—Å—Ç—ã —á–∞—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –º–æ–∫–∞–º–∏.
        """
        # –ú–ï–î–õ–ï–ù–ù–û: —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        def expensive_calculation(data):
            # –ò–º–∏—Ç–∏—Ä—É–µ–º —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
            result = 0
            for i in range(len(data)):
                result += np.sqrt(data[i] ** 2 + 1)
            return result
        
        test_data = rng.random(1000)
        
        start_time = time.time()
        real_result = expensive_calculation(test_data)
        slow_time = time.time() - start_time
        
        # –ë–´–°–¢–†–û: –º–æ–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
        mock_calc = MagicMock(return_value=42.0)
        start_time = time.time()
        mock_result = mock_calc(test_data)
        fast_time = time.time() - start_time

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º–æ–∫ –±—ã–ª –≤—ã–∑–≤–∞–Ω
        mock_calc.assert_called_once_with(test_data)
        assert mock_result == 42.0
        
        speedup = slow_time / fast_time if fast_time > 0 else float('inf')
        print(f"–£—Å–∫–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–æ–∫–∏: {speedup:.1f}x")
    
    def test_data_size_optimization(self, rng):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 4: –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
        
        –ú–Ω–æ–≥–∏–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏–µ –¥–∞—Ç–∞—Å–µ—Ç—ã.
        """
        # –ú–ï–î–õ–ï–ù–ù–û: –±–æ–ª—å—à–æ–π –¥–∞—Ç–∞—Å–µ—Ç
        large_data = pd.DataFrame({
            'price1': rng.normal(100, 10, 10000),  # 10k —Ç–æ—á–µ–∫
            'price2': rng.normal(50, 5, 10000)
        })
        
        # –ë–´–°–¢–†–û: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
        small_data = pd.DataFrame({
            'price1': rng.normal(100, 10, 100),   # 100 —Ç–æ—á–µ–∫
            'price2': rng.normal(50, 5, 100)
        })
        
        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–º–∏—Ç–∏—Ä—É–µ—Ç –±—ç–∫—Ç–µ—Å—Ç)
        def simple_backtest(data):
            return {
                'mean_price1': data['price1'].mean(),
                'std_price1': data['price1'].std(),
                'correlation': data['price1'].corr(data['price2'])
            }
        
        # –ò–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è
        start_time = time.time()
        large_result = simple_backtest(large_data)
        slow_time = time.time() - start_time
        
        start_time = time.time()
        small_result = simple_backtest(small_data)
        fast_time = time.time() - start_time
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ
        assert 'mean_price1' in large_result
        assert 'mean_price1' in small_result
        assert 'correlation' in large_result
        assert 'correlation' in small_result
        
        speedup = slow_time / fast_time if fast_time > 0 else float('inf')
        print(f"–£—Å–∫–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: {speedup:.1f}x")
    
    def test_parallel_execution_concept(self):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 5: –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.
        
        –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞–∫ —Ç–µ—Å—Ç—ã –º–æ–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
        """
        # –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
        
        # –ì—Ä—É–ø–ø–∞ 1: –ë—ã—Å—Ç—Ä—ã–µ unit-—Ç–µ—Å—Ç—ã (–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)
        fast_tests = [
            "test_math_utils",
            "test_performance_metrics", 
            "test_config_validation"
        ]
        
        # –ì—Ä—É–ø–ø–∞ 2: –°—Ä–µ–¥–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
        medium_tests = [
            "test_pair_backtester_integration",
            "test_filters_beta",
            "test_time_utilities"
        ]
        
        # –ì—Ä—É–ø–ø–∞ 3: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ end-to-end —Ç–µ—Å—Ç—ã
        slow_tests = [
            "test_global_cache_integration",
            "test_optimization_features",
            "test_synthetic_scenarios"
        ]
        
        # –ö–æ–Ω—Ü–µ–ø—Ü–∏—è: –∑–∞–ø—É—Å–∫ –≥—Ä—É–ø–ø –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
        # pytest -n auto tests/core/  # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
        # pytest -n 2 tests/engine/   # –°—Ä–µ–¥–Ω–∏–µ —Ç–µ—Å—Ç—ã  
        # pytest -n 1 tests/test_*integration*.py  # –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
        
        print("–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:")
        print(f"–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã ({len(fast_tests)}): {fast_tests}")
        print(f"–°—Ä–µ–¥–Ω–∏–µ —Ç–µ—Å—Ç—ã ({len(medium_tests)}): {medium_tests}")
        print(f"–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã ({len(slow_tests)}): {slow_tests}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –≥—Ä—É–ø–ø—ã –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è
        all_tests = set(fast_tests + medium_tests + slow_tests)
        assert len(all_tests) == len(fast_tests) + len(medium_tests) + len(slow_tests)
    
    def test_caching_optimization_concept(self, rng):
        """
        –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø 6: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏.
        
        –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
        """
        # –ò–º–∏—Ç–∏—Ä—É–µ–º —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        computation_cache = {}
        
        def expensive_computation(key, data):
            if key in computation_cache:
                print(f"–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à –¥–ª—è {key}")
                return computation_cache[key]
            
            # –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
            result = np.sum(data ** 2) + np.mean(data) * 1000
            computation_cache[key] = result
            print(f"–í—ã—á–∏—Å–ª–∏–ª–∏ –∏ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–ª–∏ {key}")
            return result
        
        test_data = rng.random(1000)
        
        # –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ - –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        start_time = time.time()
        result1 = expensive_computation("test_key", test_data)
        first_time = time.time() - start_time
        
        # –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ - –∏–∑ –∫—ç—à–∞
        start_time = time.time()
        result2 = expensive_computation("test_key", test_data)
        cached_time = time.time() - start_time
        
        # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏
        assert result1 == result2
        
        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ
        if cached_time > 0:
            speedup = first_time / cached_time
            print(f"–£—Å–∫–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: {speedup:.1f}x")
            assert speedup > 2
    
    def test_summary_optimization_recommendations(self):
        """
        –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ø–æ —É—Å–∫–æ—Ä–µ–Ω–∏—é —Ç–µ—Å—Ç–æ–≤.
        """
        recommendations = {
            "1. –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏–µ –¥–∞—Ç–∞—Å–µ—Ç—ã (500-10000 —Ç–æ—á–µ–∫)",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã (50-100 —Ç–æ—á–µ–∫) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "5-10x"
            },
            "2. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @pytest.fixture(scope='module') –¥–ª—è –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "2-3x"
            },
            "3. –ú–æ–∫–∏ –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ó–∞–º–µ–Ω–∏—Ç—å —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–∫–∞–º–∏ –≥–¥–µ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "3-5x"
            },
            "4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pytest-xdist –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "2-4x (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç CPU)"
            },
            "5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "2-3x"
            },
            "6. –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤": {
                "–ø—Ä–æ–±–ª–µ–º–∞": "–ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ –±—ã—Å—Ç—Ä—ã–µ/–º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã",
                "—Ä–µ—à–µ–Ω–∏–µ": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @pytest.mark.slow –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤",
                "–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ": "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤"
            }
        }
        
        print("\nüöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–°–ö–û–†–ï–ù–ò–Æ –¢–ï–°–¢–û–í:")
        for name, details in recommendations.items():
            print(f"\n{name}:")
            print(f"   –ü—Ä–æ–±–ª–µ–º–∞: {details['–ø—Ä–æ–±–ª–µ–º–∞']}")
            print(f"   –†–µ—à–µ–Ω–∏–µ: {details['—Ä–µ—à–µ–Ω–∏–µ']}")
            print(f"   –£—Å–∫–æ—Ä–µ–Ω–∏–µ: {details['–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ']}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–º–µ—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
        for name, details in recommendations.items():
            assert '–ø—Ä–æ–±–ª–µ–º–∞' in details
            assert '—Ä–µ—à–µ–Ω–∏–µ' in details
            assert '–æ–∂–∏–¥–∞–µ–º–æ–µ_—É—Å–∫–æ—Ä–µ–Ω–∏–µ' in details
