---
type: "agent_requested"
description: "Architectural guidelines for writing clean, maintainable, and performant Python code in the `src/` directory. Covers the fundamental requirement that all code changes must be accompanied by tests, single responsibility principle, avoiding magic numbers, using vectorized operations, and enforcing strict type hints."
---
### üèõÔ∏è –ü—Ä–∞–≤–∏–ª–∞ –ö–æ–¥–∞ –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–¥–ª—è `src/`)

1.  **–ò–∑–º–µ–Ω–∏–ª –∫–æ–¥ ‚Äî –∏–∑–º–µ–Ω–∏–ª/–¥–æ–±–∞–≤–∏–ª —Ç–µ—Å—Ç.** –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ (`src/`) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–∞. –ù–æ–≤—ã–π –∫–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è.

2.  **–û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞.** –ò–∑–±–µ–≥–∞–π "–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö" —Ñ—É–Ω–∫—Ü–∏–π. –†–∞–∑–±–∏–≤–∞–π —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –Ω–∞ –º–µ–ª–∫–∏–µ, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —á–∞—Å—Ç–∏.

3.  **–ù–∏–∫–∞–∫–∏—Ö "–º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª".** –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã–Ω–æ—Å–∏ –≤ `src/optimiser/constants.py` –∏–ª–∏ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –í –∫–æ–¥–µ ‚Äî —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

4.  **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ.** –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (`numpy`, `pandas`) –∏–ª–∏ JIT-–∫–æ–º–ø–∏–ª—è—Ü–∏—é (`numba`). Python-—Ü–∏–∫–ª—ã –ø–æ DataFrame'–∞–º –∑–∞–ø—Ä–µ—â–µ–Ω—ã –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∫–∞—Ö.

5.  **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.** –í–µ—Å—å –Ω–æ–≤—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–ª–Ω—ã–µ —Ç–∞–π–ø-—Ö–∏–Ω—Ç—ã –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `mypy`.