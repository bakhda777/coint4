# Drift Monitoring Configuration
# Tracks performance degradation and triggers automatic responses

windows:
  short_days: 14         # Short window for recent performance
  long_days: 60          # Long window for baseline comparison
  min_observations: 10   # Minimum observations required per window

thresholds:
  psr_p5_min: 0.90            # Minimum acceptable P5 PSR bound
  sharpe_p5_min: 0.60         # Minimum acceptable P5 Sharpe bound
  sharpe_drop_tol: 0.35       # Max acceptable drop: short vs long (35%)
  psr_drop_tol: 0.20          # Max acceptable PSR drop (20%)
  consecutive_fails: 3        # Consecutive failures before action

# Automatic response actions
actions:
  derisk_scale: [0.75, 0.5, 0.25]  # Progressive risk reduction levels
  rebuild_portfolio: true          # Trigger portfolio rebuild on severe drift
  
  # Thresholds for different action levels
  level_1_sharpe_drop: 0.25       # 25% drop -> scale to 75%
  level_2_sharpe_drop: 0.40       # 40% drop -> scale to 50%  
  level_3_sharpe_drop: 0.60       # 60% drop -> scale to 25%
  
  level_1_psr_min: 0.85           # PSR P5 < 0.85 -> level 1
  level_2_psr_min: 0.70           # PSR P5 < 0.70 -> level 2
  level_3_psr_min: 0.50           # PSR P5 < 0.50 -> level 3

# Data sources
data_sources:
  confidence_file: "artifacts/uncertainty/confidence.csv"
  wfa_results: "artifacts/wfa/results_per_fold.csv"
  weekly_summary: "artifacts/live/WEEKLY_SUMMARY.md"
  portfolio_weights: "artifacts/portfolio/weights.csv"

# Output paths
outputs:
  dashboard: "artifacts/monitoring/DRIFT_DASHBOARD.md"
  actions_log: "artifacts/monitoring/ACTIONS_TAKEN.md"
  drift_data: "artifacts/monitoring/drift_data.csv"

# Monitoring settings
monitoring:
  track_pairs: true              # Monitor individual pairs
  track_portfolio: true          # Monitor portfolio-level metrics
  alert_on_degradation: true     # Generate alerts
  
  # Regime detection integration
  use_regime_detector: true      # Use market regime in decisions
  regime_override: true          # Allow regime to override thresholds

# Notification settings (future extension)
notifications:
  enabled: false
  channels: ["log"]              # log | email | slack
  severity_threshold: "WARN"     # INFO | WARN | FAIL

# Debug and logging
debug:
  verbose: true
  save_intermediate: true
  plot_trends: false            # Skip plotting for now