# üìä Outputs Directory

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∞–Ω–∞–ª–∏–∑–∞ –∏ –±—ç–∫—Ç–µ—Å—Ç–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### studies/
–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Optuna —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

- **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤**: `{study_name}.db` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `web_opt_20250113_120101.db`)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `outputs/studies/` –∏ –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –±–∞–∑:
- `web_opt_*.db` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã UI/–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `streamlit_opt_*.db` - runs –∏–∑ Streamlit UI
- `pairs_strategy_v1.db` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ CLI

### preselected_pairs.csv
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `symbol1, symbol2` - –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞
- `pvalue` - P-value –∫–æ–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `half_life` - Half-life –≤ –±–∞—Ä–∞—Ö
- `spread_std` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ø—Ä–µ–¥–∞

## üîß –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ Optuna

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:
```python
import optuna

study = optuna.load_study(
    study_name="clean_sharpe_20240810",
    storage="sqlite:///outputs/studies/clean_sharpe_20240810.db"
)
```

### –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```python
# –õ—É—á—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
print(study.best_params)
print(f"Best Sharpe: {study.best_value:.3f}")

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
optuna.visualization.plot_optimization_history(study)
optuna.visualization.plot_param_importances(study)
```

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±–∞–∑:
```bash
# –£–¥–∞–ª–∏—Ç—å –±–∞–∑—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find outputs/studies -name "*.db" -mtime +30 -delete
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –≤ –±–∞–∑–∞—Ö

–ö–∞–∂–¥—ã–π trial —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **value**: Sharpe ratio (—Ü–µ–ª–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞)
- **params**: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **user_attrs**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  - `total_trades` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫
  - `win_rate` - –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
  - `max_drawdown` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
  - `total_pnl` - –û–±—â–∏–π PnL

## üóÑÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º

- –†–µ–≥—É–ª—è—Ä–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –±–∞–∑—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `optuna.delete_study()` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- –°–∂–∏–º–∞–π—Ç–µ –∞—Ä—Ö–∏–≤–Ω—ã–µ –±–∞–∑—ã: `gzip archive/old_studies/*.db`
