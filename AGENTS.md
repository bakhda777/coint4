# AGENTS

- Всегда обновляйте документацию (`docs/`, `README.md`, `coint4/README.md`, `coint4/CLAUDE.md`) при изменениях в коде, CLI, конфигурациях и тестах.
- Примеры команд должны быть воспроизводимы из `coint4/` и соответствовать текущим entrypoint-ам.
- Устаревшие материалы помечайте как legacy/archived, чтобы они не вводили в заблуждение.
- Любые WFA-прогоны ограничены 5 шагами; для большего количества шагов сначала спросить у меня.
- Все изменения комитить на GitHub с понятным описанием или комментарием.
- В спорных вопросах руководствуйтесь best practices для подобных проектов и парной торговли криптовалютой.
- При отсутствии явных указаний выбирать оптимальные стратегии самостоятельно, опираясь на Sharpe, PnL, просадку и стабильность.
- Всегда используйте параллелизацию и загружайте все доступные CPU по максимуму.
- Информацию о прогонах (включая фильтрацию пар по этапам) фиксировать в `docs/optimization_runs_*.md`.
- Все прогоны агрегировать в единый файл/папку для последующего анализа (журнал + артефакты запусков).
- Файлы мониторинга/дашбордов и все артефакты/результаты включать в коммиты всегда, даже в нестандартных случаях.
- Для контроля выполнения прогонов отслеживать нагрузку CPU, а не логи.
- На этом сервере (146.103.41.248) не запускать тяжёлые прогоны; все WFA/оптимизации/долгие бэктесты выполнять только на 85.198.90.128.
- Всегда общайтесь со мной на русском языке.

## Цель и ориентировочный план (может меняться)
- Цель: добиться стабильного Sharpe > 1 для стратегии (медиана по 5 шагам WFA ≥ 1.0, минимум по шагам ≥ 0.6) с учётом комиссий, слиппеджа и funding.
- План: зафиксировать базовую конфигурацию и подтвердить результат на 5-step WFA и holdout; затем последовательно улучшать сигнал (entry/exit/hold/cooldown/таймфрейм), ужесточать отбор пар (corr/pvalue/kpss/hurst/ликвидность), и сглаживать риск (position sizing, max positions, margin, kelly); после каждого этапа проводить стресс-тесты издержек.
